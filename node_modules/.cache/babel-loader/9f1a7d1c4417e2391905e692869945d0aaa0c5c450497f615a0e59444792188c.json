{"ast":null,"code":"import _classCallCheck from\"/Users/mark/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mark/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Auth=/*#__PURE__*/function(){function Auth(baseUrl){_classCallCheck(this,Auth);this._baseUrl=baseUrl;}_createClass(Auth,[{key:\"_testRes\",value:function _testRes(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"register\",value:function register(_ref){var _this=this;var password=_ref.password,email=_ref.email;return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password,email:email})}).then(function(res){return _this._testRes(res);});}},{key:\"authorizer\",value:function authorizer(_ref2){var _this2=this;var password=_ref2.password,email=_ref2.email;return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password,email:email})}).then(function(res){return _this2._testRes(res);});}},{key:\"tokenCheck\",value:function tokenCheck(currentToken){var _this3=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'GET',headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(currentToken)}}).then(function(res){return _this3._testRes(res);});}}]);return Auth;}();export var auth=new Auth('https://auth.nomoreparties.co');","map":{"version":3,"names":["Auth","baseUrl","_classCallCheck","_baseUrl","_createClass","key","value","_testRes","res","ok","json","Promise","reject","concat","status","register","_ref","_this","password","email","fetch","method","headers","body","JSON","stringify","then","authorizer","_ref2","_this2","tokenCheck","currentToken","_this3","auth"],"sources":["/Users/mark/dev/react-mesto-auth/src/utils/Auth.js"],"sourcesContent":["class Auth {\n    constructor(baseUrl){\n        this._baseUrl = baseUrl;\n    }\n\n    _testRes(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n    }\n\n    register({ password, email }) {\n        return fetch(`${this._baseUrl}/signup`, { \n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({password, email})\n        })\n        .then(res => this._testRes(res))\n    }\n\n    authorizer({ password, email }) {\n        return fetch(`${this._baseUrl}/signin`, { \n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({password, email})\n        })\n        .then(res => this._testRes(res))\n    }\n\n    tokenCheck(currentToken) {\n        return fetch(`${this._baseUrl}/users/me`, {\n            method: 'GET',\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\" : `Bearer ${currentToken}`\n            },\n        })\n        .then(res => this._testRes(res))\n    }\n}\n\nexport const auth = new Auth('https://auth.nomoreparties.co');"],"mappings":"6OAAM,CAAAA,IAAI,yBACN,SAAAA,KAAYC,OAAO,CAAC,CAAAC,eAAA,MAAAF,IAAA,EAChB,IAAI,CAACG,QAAQ,CAAGF,OAAO,CAC3B,CAACG,YAAA,CAAAJ,IAAA,GAAAK,GAAA,YAAAC,KAAA,CAED,SAAAC,SAASC,GAAG,CAAE,CACV,GAAIA,GAAG,CAACC,EAAE,CAAE,CACR,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CACrB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAC,MAAA,CAAYL,GAAG,CAACM,MAAM,CAAE,CAAC,CAClD,CAAC,GAAAT,GAAA,YAAAC,KAAA,CAED,SAAAS,SAAAC,IAAA,CAA8B,KAAAC,KAAA,SAAnB,CAAAC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAEC,KAAK,CAAAH,IAAA,CAALG,KAAK,CACtB,MAAO,CAAAC,KAAK,IAAAP,MAAA,CAAI,IAAI,CAACV,QAAQ,YAAW,CACpCkB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACP,QAAQ,CAARA,QAAQ,CAAEC,KAAK,CAALA,KAAK,CAAC,CAC1C,CAAC,CAAC,CACDO,IAAI,CAAC,SAAAlB,GAAG,QAAI,CAAAS,KAAI,CAACV,QAAQ,CAACC,GAAG,CAAC,GAAC,CACpC,CAAC,GAAAH,GAAA,cAAAC,KAAA,CAED,SAAAqB,WAAAC,KAAA,CAAgC,KAAAC,MAAA,SAAnB,CAAAX,QAAQ,CAAAU,KAAA,CAARV,QAAQ,CAAEC,KAAK,CAAAS,KAAA,CAALT,KAAK,CACxB,MAAO,CAAAC,KAAK,IAAAP,MAAA,CAAI,IAAI,CAACV,QAAQ,YAAW,CACpCkB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACP,QAAQ,CAARA,QAAQ,CAAEC,KAAK,CAALA,KAAK,CAAC,CAC1C,CAAC,CAAC,CACDO,IAAI,CAAC,SAAAlB,GAAG,QAAI,CAAAqB,MAAI,CAACtB,QAAQ,CAACC,GAAG,CAAC,GAAC,CACpC,CAAC,GAAAH,GAAA,cAAAC,KAAA,CAED,SAAAwB,WAAWC,YAAY,CAAE,KAAAC,MAAA,MACrB,MAAO,CAAAZ,KAAK,IAAAP,MAAA,CAAI,IAAI,CAACV,QAAQ,cAAa,CACtCkB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAT,MAAA,CAAakB,YAAY,CAC5C,CACJ,CAAC,CAAC,CACDL,IAAI,CAAC,SAAAlB,GAAG,QAAI,CAAAwB,MAAI,CAACzB,QAAQ,CAACC,GAAG,CAAC,GAAC,CACpC,CAAC,WAAAR,IAAA,KAGL,MAAO,IAAM,CAAAiC,IAAI,CAAG,GAAI,CAAAjC,IAAI,CAAC,+BAA+B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}