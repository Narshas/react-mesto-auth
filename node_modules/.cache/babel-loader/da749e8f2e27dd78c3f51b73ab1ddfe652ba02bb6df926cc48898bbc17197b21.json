{"ast":null,"code":"import _toConsumableArray from\"/Users/mark/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mark/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{ImagePopup}from\"./ImagePopup\";import{PopupWithForm}from\"./PopupWithForm\";import{Header}from\"./Header\";import{Main}from\"./Main\";import{Footer}from\"./Footer\";import{api}from\"../utils/Api\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{EditProfilePopup}from\"./EditProfilePopup\";import{EditAvatarPopup}from\"./EditAvatarPopup\";import{AddPlacePopup}from\"./AddPlacePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isZoomPopupOpen=_React$useState8[0],setIsZoomPopupOpen=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];var _React$useEffect=React.useEffect({}),_React$useEffect2=_slicedToArray(_React$useEffect,2),currentUser=_React$useEffect2[0],setCurrentUser=_React$useEffect2[1];var handleEditAvatarClick=function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);};var handleEditProfileClick=function handleEditProfileClick(){setIsEditProfilePopupOpen(true);};var handleAddPlaceClick=function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);};function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);});}var handleCardClick=function handleCardClick(element){setSelectedCard(element);setIsZoomPopupOpen(true);};function handleDeleteClick(card){api.deleteCard(card).then(function(){setCards(function(cards){return cards.filter(function(c){return c._id!==card.id;});});}).catch(function(err){console.log(err);});}function handleUpdateUser(){api.patchUserInfo().then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log(err);});}function handleUpdateAvatar(avatarData){api.patchAvatar(avatarData).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log(err);});}function handleAddPlaceSubmit(){api.postNewCard().then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));}).catch(function(err){console.log(err);});}var closeAllPopups=function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsZoomPopupOpen(false);};React.useEffect(function(){api.getUserInfo().then(function(res){setCurrentUser(res);}).catch(function(err){console.log(err);});},[]);React.useEffect(function(){api.getDefoltElements().then(function(res){setCards(res);}).catch(function(err){console.log(err);});},[]);return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleDeleteClick}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(ImagePopup,{cardData:selectedCard,onClose:closeAllPopups,isOpen:isZoomPopupOpen}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit})]})});}","map":{"version":3,"names":["React","ImagePopup","PopupWithForm","Header","Main","Footer","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_React$useState3","_React$useState4","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_React$useState5","_React$useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_React$useState7","_React$useState8","isZoomPopupOpen","setIsZoomPopupOpen","_React$useState9","_React$useState10","selectedCard","setSelectedCard","_React$useState11","_React$useState12","cards","setCards","_React$useEffect","useEffect","_React$useEffect2","currentUser","setCurrentUser","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","then","newCard","state","map","c","catch","err","console","log","handleCardClick","element","handleDeleteClick","deleteCard","filter","id","handleUpdateUser","patchUserInfo","res","closeAllPopups","handleUpdateAvatar","avatarData","patchAvatar","handleAddPlaceSubmit","postNewCard","concat","_toConsumableArray","getUserInfo","getDefoltElements","Provider","value","children","className","onEditProfile","onAddPlace","onEditAvatar","onCardClick","onCardLike","onCardDelete","cardData","onClose","isOpen","onUpdateAvatar","onUpdateUser"],"sources":["/Users/mark/dev/mesto-react/src/components/App.js"],"sourcesContent":["import React from \"react\";\n\nimport { ImagePopup } from \"./ImagePopup\";\nimport { PopupWithForm } from \"./PopupWithForm\";\nimport { Header } from \"./Header\";\nimport { Main } from \"./Main\";\nimport { Footer } from \"./Footer\";\nimport { api } from \"../utils/Api\";\n\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { EditProfilePopup } from \"./EditProfilePopup\";\nimport { EditAvatarPopup } from \"./EditAvatarPopup\";\nimport { AddPlacePopup } from \"./AddPlacePopup\";\n\nexport function App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isZoomPopupOpen, setIsZoomPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [currentUser, setCurrentUser] = React.useEffect({})\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  } \n\n  const handleCardClick = (element) => {\n    setSelectedCard(element);\n    setIsZoomPopupOpen(true);\n  }\n\n  function handleDeleteClick(card) {\n    api.deleteCard(card)\n      .then(() => {\n        setCards((cards) => cards.filter((c) => c._id !== card.id))\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateUser() {\n    api.patchUserInfo()\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(avatarData) {\n    api.patchAvatar(avatarData)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n      \n  }\n\n  function handleAddPlaceSubmit() {\n    api.postNewCard()\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsZoomPopupOpen(false);\n  }\n  \n  React.useEffect(() => {\n\n    api.getUserInfo()\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }, []);\n\n  React.useEffect(() => {\n\n    api.getDefoltElements()\n        .then((res) => {\n            setCards(res);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n            {/* Поддерево, в котором будет доступен контекст */}\n\n      <div className=\"root\">\n        <Header />\n        <Main cards={cards} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} onCardLike={handleCardLike} onCardDelete={handleDeleteClick}/>\n        <Footer />\n        <ImagePopup cardData={selectedCard} onClose={closeAllPopups} isOpen={isZoomPopupOpen} />\n\n        {/* Редактирование аватар */}\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n\n        {/* Редактировать профиль */}\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n\n        {/* Добавить место */}\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n        \n\n      </div>\n    </CurrentUserContext.Provider>  \n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}