{"ast":null,"code":"import _toConsumableArray from\"/Users/mark/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mark/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{ImagePopup}from\"./ImagePopup\";import{Header}from\"./Header\";import{Main}from\"./Main\";import{Footer}from\"./Footer\";import{api}from\"../utils/Api\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{EditProfilePopup}from\"./EditProfilePopup\";import{EditAvatarPopup}from\"./EditAvatarPopup\";import{AddPlacePopup}from\"./AddPlacePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isZoomPopupOpen=_React$useState8[0],setIsZoomPopupOpen=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];var _React$useState13=React.useState({}),_React$useState14=_slicedToArray(_React$useState13,2),currentUser=_React$useState14[0],setCurrentUser=_React$useState14[1];var handleEditAvatarClick=function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);};var handleEditProfileClick=function handleEditProfileClick(){setIsEditProfilePopupOpen(true);};var handleAddPlaceClick=function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);};function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);});}var handleCardClick=function handleCardClick(element){setSelectedCard(element);setIsZoomPopupOpen(true);};function handleDeleteClick(card){api.deleteCard(card).then(function(){setCards(function(cards){return cards.filter(function(c){return c._id!==card.id;});});}).catch(function(err){console.log(err);});}function handleUpdateUser(){api.getUserInfo().then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log(err);});}function handleUpdateAvatar(avatarData){api.patchAvatar(avatarData).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log(err);});}function handleAddPlaceSubmit(cardInfo){api.postNewCard(cardInfo).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));}).catch(function(err){console.log(err);});}var closeAllPopups=function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsZoomPopupOpen(false);};React.useEffect(function(){api.getUserInfo().then(function(res){setCurrentUser(res);}).catch(function(err){console.log(err);});},[]);React.useEffect(function(){api.getDefoltElements().then(function(res){setCards(res);}).catch(function(err){console.log(err);});},[]);return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleDeleteClick}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(ImagePopup,{cardData:selectedCard,onClose:closeAllPopups,isOpen:isZoomPopupOpen}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit})]})});}","map":{"version":3,"names":["React","ImagePopup","Header","Main","Footer","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_React$useState3","_React$useState4","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_React$useState5","_React$useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_React$useState7","_React$useState8","isZoomPopupOpen","setIsZoomPopupOpen","_React$useState9","_React$useState10","selectedCard","setSelectedCard","_React$useState11","_React$useState12","cards","setCards","_React$useState13","_React$useState14","currentUser","setCurrentUser","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","then","newCard","state","map","c","catch","err","console","log","handleCardClick","element","handleDeleteClick","deleteCard","filter","id","handleUpdateUser","getUserInfo","res","closeAllPopups","handleUpdateAvatar","avatarData","patchAvatar","handleAddPlaceSubmit","cardInfo","postNewCard","concat","_toConsumableArray","useEffect","getDefoltElements","Provider","value","children","className","onEditProfile","onAddPlace","onEditAvatar","onCardClick","onCardLike","onCardDelete","cardData","onClose","isOpen","onUpdateAvatar","onUpdateUser"],"sources":["/Users/mark/dev/mesto-react/src/components/App.js"],"sourcesContent":["import React from \"react\";\n\nimport { ImagePopup } from \"./ImagePopup\";\nimport { Header } from \"./Header\";\nimport { Main } from \"./Main\";\nimport { Footer } from \"./Footer\";\nimport { api } from \"../utils/Api\";\n\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { EditProfilePopup } from \"./EditProfilePopup\";\nimport { EditAvatarPopup } from \"./EditAvatarPopup\";\nimport { AddPlacePopup } from \"./AddPlacePopup\";\n\nexport function App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isZoomPopupOpen, setIsZoomPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  } \n\n  const handleCardClick = (element) => {\n    setSelectedCard(element);\n    setIsZoomPopupOpen(true);\n  }\n\n  function handleDeleteClick(card) {\n    api.deleteCard(card)\n      .then(() => {\n        setCards((cards) => cards.filter((c) => c._id !== card.id))\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  \n\n  function handleUpdateUser() {\n    api.getUserInfo()\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(avatarData) {\n    api.patchAvatar(avatarData)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n      \n  }\n\n  function handleAddPlaceSubmit(cardInfo) {\n    api.postNewCard(cardInfo)\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsZoomPopupOpen(false);\n  }\n  \n  React.useEffect(() => {\n\n    api.getUserInfo()\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }, []);\n\n  React.useEffect(() => {\n\n    api.getDefoltElements()\n        .then((res) => {\n            setCards(res);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n            {/* Поддерево, в котором будет доступен контекст */}\n\n      <div className=\"root\">\n        <Header />\n        <Main cards={cards} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} onCardLike={handleCardLike} onCardDelete={handleDeleteClick}/>\n        <Footer />\n        <ImagePopup cardData={selectedCard} onClose={closeAllPopups} isOpen={isZoomPopupOpen} />\n\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n        \n\n      </div>\n    </CurrentUserContext.Provider>  \n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}